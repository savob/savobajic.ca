<!DOCTYPE html>
<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Arbiter Lighting</title>
</head>
<body>
  
<link rel="stylesheet" href=/css/style.css>


<div class="wrapper">

<header>
  <h1><a href="/">Savo's Site</a></h1>
</header>

<nav>
<div class="flex-container">

<div class="navbutton"><a href="/about-me/">About Me</a></div>
<div class="dropdown">
	<a href="/projects/">Projects</a>
	<div class="dropdown-content">
		<a href="/projects/academic/">Academic</a>
		<a href="/projects/extracurricular/">Extracurricular</a>
		<a href="/projects/personal/">Personal</a>
		<a href="/projects/work/">Work</a>
	</div>
</div>
<div class="navbutton"><a href="/publications/">Publications</a></div>
<div class="navbutton"><a href="/work-experience/">Employment</a></div>
<div class="navbutton"><a href="/volunteering/">Volunteering</a></div>
<div class="navbutton"><a href="/contact/">Contact</a></div>

<div>
</nav>


<ul class="breadcrumbs">
    <li class="breadcrumbs"><a class="subtitle" href="/">Home</a></li>
                
                    
            		 	      <li class="breadcrumbs"><a class="subtitle" href="/projects">Projects</a></li>
            		    
				        
                
                    
            		 	      <li class="breadcrumbs"><a class="subtitle" href="/projects/extracurricular">Extracurricular Projects</a></li>
            		    
				        <li class="breadcrumbs"><a class="subtitle" href="/projects/extracurricular/arbiter">Arbiter Lighting</a></li></ul>



	
	<main>
	<section class="mainIntro">
  



	<h1>Arbiter Lighting</h1>
	<div class="introLine"></div>
	<div class="subtitle"><strong>Last Modified:</strong> Saturday, Jan 22, 2022</div>
	<div class="subtitle"><strong>Status:</strong> Completed</div>

	
		<div class="subtitle"><strong>Period:</strong> January 2018 - April 2018</div>
	

	<div class="subtitle"><strong>Client:</strong> HPVDT</div> 
	<div class="subtitle"><strong>GitHub Repository:</strong> <a href="https://github.com/hpvdt/arbiter">https://github.com/hpvdt/arbiter</a></div> 

	<div class="subtitle"><strong>Tags:</strong> <a href="/tags/analog">analog</a> <a href="/tags/eagle">EAGLE</a> <a href="/tags/embedded">embedded</a> <a href="/tags/hardware">hardware</a> <a href="/tags/hpvdt">HPVDT</a> </div>

	<div class="introLine"></div>

 


  </section>

  <section class="mainContent">
  <h1 id="overview">Overview</h1>
<p>The team&rsquo;s new tricycle needed lighting on it to make it road legal. I was tasked to prepare a system based off of what was
proposed for Tempest (the previous vehicle) but never realized in time for its competition. <strong>This ended up becoming my
first printed circuit board I would design and assemble!</strong></p>
<p>Even though I did do some part selections and slight modifications, the system was still principally not of my own design,
so I won&rsquo;t credit it as my first complete PCB project, nor my first large scoped project without a microcontroller.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Provide a constant current to the LEDs of the bike
<ul>
<li>Front, rear, left, and right light banks individually</li>
</ul>
</li>
<li>Allow the user to easily control the lights as needed while riding</li>
<li>Blink the turning indicators when used at a frequency of about 1Hz</li>
<li>Run using a nominal supply voltage of 11.1V</li>
</ul>
<h2 id="objectives">Objectives</h2>
<ul>
<li>Minimize wasted energy</li>
<li>Have a highbeams bank for high-power LEDs</li>
</ul>
<h2 id="takeaways">Takeaways</h2>
<ul>
<li>The project was pretty simple looking back but exposed me to many new concepts for me, namely the concept of using MOSFETs
in non-saturation (linear) operation modes.</li>
<li>This was the <strong>first time</strong>(!) the team had proper lights ready in advance of the competition</li>
<li>This was my first electronics project for HPVDT, and I would become the Head of Electronics following its completition and
the departure of my mentor from the team.</li>
<li>Running several parallel lines of LEDs significantly increases current draw and losses. Perhaps it would be better to raise voltage?</li>
</ul>
<h1 id="detailed-report">Detailed Report</h1>
<p>The basic units of this design were descried the year prior in a nice PDF document for Tempest (available on the team&rsquo;s GitHub
for it, <a href="https://github.com/hpvdt/tempest">here</a>. It was my job to slap four of these onto a circuit board with the supporting
electronics and have it ready and installed before competition in April.</p>
<h2 id="designing-the-circuit">Designing the Circuit</h2>
<p>The basis of the circuit is a MOSFET constant current circuit similar to (a) in the figure below, with one used for each line
LEDs. The basic fuctional principle is that MOSFET&rsquo;s gate (Q2) is initially pulled up and it begins to allow current through the
LEDs into the resistor, R3. As the current increases so does the voltage across R3 until it passes the threshold for the NPN
transistor, Q1, to begin allowing current to flow across it as well. This pulls down the voltage on the MOSFET&rsquo;s gate until the
current decreases enough through Q2 that Q1 stops pulling it down any further. This balance is set by R3&rsquo;s value so it
determines the current supplied to the LEDs.</p>
<figure>
<img src="/images/arbiter-brief.png">
<figcaption>The basic circuits propsed for use in Tempest</figcaption>
</figure>
<p>Other than changing some parts due to availabilities of the transistors origianlly mentioned in Tempest&rsquo;s outline, and then some
of the resistors to compensate for the different characteristics of these new transistors, the design remained fundamentally the
same for these into the final design</p>
<p>There was also a design in the outline, instructing how one could use a 555 timer IC to generate the regular pulses needed for
the turn indicators, so I followed this design without any modification needed. Looking back, the 555 is a perfect choice for
this due to the fact it could operate in the system&rsquo;s power domain of 11.1V with no regulators of level shifters needed.</p>
<p>With these subcircuits designed and connected, I moved to prepare the circuit board using EAGLE. The first step was to prepare a
schematic in EAGLE, which was not too difficult once I learned how to navigate the part library propely. Afterwards I began laying
out the circuit board. Given the high currents going through the system (if all lights were on simultaniously, more than 10A would
be drawn!) I increased the width of the main power traces accordingly.</p>
<figure>
<img src="/images/arbiter-layout.png">
<figcaption>The final layout</figcaption>
</figure>
<p>Once produced the finished circuit board looked like this, with that classic PCB green.</p>
<figure>
<img src="/images/arbiter-board.jpg">
<figcaption>The produced circuit board</figcaption>
</figure>
<h2 id="assembly">Assembly</h2>
<p>Assembly wasn&rsquo;t anything particularly complicated. It was an entirely through-hole board, composed mostly of high power resistors
and transistors so there was lots of space for me to solder and not worry about creating shorts. Although it may appear as though
the board is held in the vehicle due to its soldered on wires, there were connectors present on these wires that would allow the
system to be easily removed as needed.</p>
<figure>
<img src="/images/arbiter-assembled.jpg">
<figcaption>The assembled board used in the vehicle</figcaption>
</figure>
<p>A partially assembled spare board was prepared should the need arise, however it never found use as more than a paperweight.</p>
<figure>
<img src="/images/arbiter-spare.jpg">
<figcaption>A (mostly) assembled spare board</figcaption>
</figure>

  </section>
  </main>
  
  <footer>
     <a href="http://savobajic.ca/">Savo Bajic's Website</a>
</footer>
</div>

</body>
</html>
