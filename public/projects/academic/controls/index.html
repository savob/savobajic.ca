<!DOCTYPE html>
<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Crane Gantry Control System</title>
</head>
<body>
  
<link rel="stylesheet" href=/css/style.css>


<div class="wrapper">

<header>
  <h1><a href="/">Savo's Site</a></h1>
</header>

<nav>
<div class="flex-container">

<div class="navbutton"><a href="/about-me/">About Me</a></div>
<div class="dropdown">
	<a href="/projects/">Projects</a>
	<div class="dropdown-content">
		<a href="/projects/academic/">Academic</a>
		<a href="/projects/extracurricular/">Extracurricular</a>
		<a href="/projects/personal/">Personal</a>
		<a href="/projects/work/">Work</a>
	</div>
</div>
<div class="navbutton"><a href="/publications/">Publications</a></div>
<div class="navbutton"><a href="/work-experience/">Employment</a></div>
<div class="navbutton"><a href="/volunteering/">Volunteering</a></div>
<div class="navbutton"><a href="/contact/">Contact</a></div>

<div>
</nav>


<ul class="breadcrumbs">
    <li class="breadcrumbs"><a class="subtitle" href="/">Home</a></li>
                
                    
            		 	      <li class="breadcrumbs"><a class="subtitle" href="/projects">Projects</a></li>
            		    
				        
                
                    
            		 	      <li class="breadcrumbs"><a class="subtitle" href="/projects/academic">Academic Projects</a></li>
            		    
				        <li class="breadcrumbs"><a class="subtitle" href="/projects/academic/controls">Crane Gantry Control System</a></li></ul>



	
	<main>
	<section class="mainIntro">
  



	<h1>Crane Gantry Control System</h1>
	<div class="introLine"></div>
	<div class="subtitle"><strong>Last Modified:</strong> Wednesday, Feb 2, 2022</div>
	<div class="subtitle"><strong>Status:</strong> Complete</div>

	
		<div class="subtitle"><strong>Period:</strong> September 2020 - December 2020</div>
	

	<div class="subtitle"><strong>Client:</strong> MIE404, Control Systems</div> 
	

	<div class="subtitle"><strong>Tags:</strong> <a href="/tags/control">control</a> <a href="/tags/matlab">matlab</a> <a href="/tags/simulink">simulink</a> </div>

	<div class="introLine"></div>

 


  </section>

  <section class="mainContent">
  <h1 id="overview">Overview</h1>
<p>For my control systems class in fourth year, we had to design and simulate a control system to regulate the motion of a
gantry crane to prevent excessive load swinging. This was all done in MATLAB and Simulink. In a normal year we would have
actually been operating a real life pendulum system but alas we had to make do during the COVID-19 pandemic.</p>
<p>The projects was split into four tasks across two reports:</p>
<ol>
<li>Fundamentals</li>
<li>Modelling</li>
<li>Transient Time Response</li>
<li>Design</li>
</ol>
<p>I completed the project successfully, and the reports were well received too.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Design a control system for a virtual gantry crane</li>
<li>Analyze and optimize the control system using MATLAB and Simulink</li>
<li>Obtain performance as specified per task</li>
</ul>
<h2 id="takeaways">Takeaways</h2>
<ul>
<li>Characterizing a system properly is vital to controlling it</li>
<li>Preparing and testing control systems in Simulink is an efficient way to see how my changes will become reality</li>
</ul>
<h1 id="detailed-report">Detailed Report</h1>
<p>In my fourth year control systems class, MIE404: Control Systems, our course project was to design a controller to operate
a crane <em>efficiently</em>. By &ldquo;<em>efficiently</em>&rdquo;, it was meant that the loads suspended on crane would be moved quickly <strong>without</strong>
significant swaying which would complicate and extend the unloading time as well as potential endanger nearby workers.</p>
<figure>
<img src="/images/controls-gantry-crane.png">
<figcaption>An example of a gantry crane</figcaption>
</figure>
<h2 id="the-system-model">The System Model</h2>
<p>In our project we were only considering the motion to be along a single axis, although an additional one can be easily
incorporated into the system. The crane system consists of a trolley, rope, and payload. These are shown modelled in the
figure below, where:</p>
<blockquote>
<p><em>m<sub>t</sub></em> – mass of the trolley</p>
<p><em>m<sub>l</sub></em> – mass of the load</p>
<p><em>x<sub>t</sub></em> – horizontal displacement of the trolley</p>
<p><em>x<sub>l</sub></em> – horizontal displacement of the load</p>
<p><em>φ</em> – angular displacement of the rope</p>
<p><em>L</em> – length of the rope</p>
<p><em>b<sub>t</sub></em> – coefficient of friction between the trolley and the rail</p>
<p><em>b<sub>l</sub></em> – coefficient of friction on the load (caused by pivot joint friction and air friction)</p>
<p><em>F</em> – force applied to the trolley</p>
</blockquote>
<figure>
<img src="/images/controls-system-model.png">
<figcaption>The simplified system model</figcaption>
</figure>
<h2 id="fundamentals">Fundamentals</h2>
<p>This task had us list several potential input and output variable pairings for a feedback system from how the crane was
described, for example <em>F</em> as an input and <em>φ</em> as an output. We then had to explain the purpose of such a closed-loop system
and how they would improve the crane&rsquo;s efficiency. This came down to stating that we needed a closed-loop control system
because we were aiming to control <em>φ</em>, but it cannot be controlled directly, only as the result of other system features.</p>
<p>In addition to outlining our fundamental understanding of the control system we needed to develop, we had to prove it by
making a generic block diagram of one input-output variable pair, showing a potential distuirbing signal and other typical
components of a flow diagram. I selected to do <em>F</em>-<em>x<sub>t</sub></em>.</p>
<figure>
<img src="/images/controls-disturbed-flow.png">
<figcaption>My generalized block diagram for <em>F-x<sub>t</sub></em></figcaption>
</figure>
<h2 id="modelling">Modelling</h2>
<p>The next stage of the project was to derive the mathematical models fo the system by hand and use them to find some transfer
functions between key inputs and outputs. The mathematical models for the system were:</p>
<blockquote>
<p><em>x<sub>l</sub></em> = <em>x<sub>t</sub></em> - <em>L</em>sin(<em>φ</em>)</p>
<p><em>gφm<sub>l</sub></em> = <em>x''<sub>l</sub> m<sub>l</sub></em> + <em>x'<sub>l</sub> b<sub>l</sub></em></p>
<p><em>F</em> = <em>x<sub>t</sub> m<sub>l</sub></em> + <em>x<sub>t</sub> b<sub>t</sub></em> + <em>gm<sub>l</sub></em> tan(<em>φ</em>)</p>
</blockquote>
<p>To make things easier for us as we made the transform functions, we were allowed to linearize our models by assuming that
<em>φ</em> would in most cases be approximately zero, thus sin(<em>φ</em>) = <em>φ</em> and cos(<em>φ</em>) = 1. Our new model was:</p>
<blockquote>
<p><em>x<sub>l</sub></em> = <em>x<sub>t</sub></em> - <em>Lφ</em></p>
<p><em>gφm<sub>l</sub></em> = <em>x''<sub>l</sub> m<sub>l</sub></em> + <em>x'<sub>l</sub> b<sub>l</sub></em></p>
<p><em>F</em> = <em>x<sub>t</sub> m<sub>l</sub></em> + <em>x<sub>t</sub> b<sub>t</sub></em> + <em>gφm<sub>l</sub></em></p>
</blockquote>
<p>My generalized transfer function for Φ(s)/X<sub>l</sub>(s):</p>
<blockquote>
<p>(s<sup>2</sup>m<sub>l</sub> + sb<sub>l</sub>) / (s<sup>2</sup>Lm<sub>l</sub> + sLb<sub>l</sub> + gm<sub>l</sub>)</p>
</blockquote>
<p>My generalized transfer function for Φ(s)/V<sub>t</sub>(s):</p>
<blockquote>
<p>(sm<sub>l</sub> + b<sub>l</sub>) / (s<sup>2</sup>Lm<sub>l</sub> + sLb<sub>l</sub> + gm<sub>l</sub>)</p>
</blockquote>
<p>I then entered the values I supposed to use for the various constants to get my final answer for each transfer function.
After all these hand derivations, I then turned to the last component for this task, generating a Simulink model of the
crane based on input force.</p>
<figure>
<img src="/images/controls-simulink-model.png">
<figcaption>My block diagram for <em>F-φ</em> in Simulink based on the mathematical model</figcaption>
</figure>
<h2 id="transient-time-response">Transient Time Response</h2>
<p>This was a short task that focused on having us simulating the transient response of Φ(s)/V<sub>t</sub>(s) to a step and
ramp input, with an open loop and negative unity feedback, for a total of four responses plotted.</p>
<figure>
<img src="/images/controls-phi-step.png">
<figcaption>Open-loop φ response to a step input of v<sub>t</sub></figcaption>
</figure>
<figure>
<img src="/images/controls-phi-ramp.png">
<figcaption>Open-loop φ response to a ramp input of v<sub>t</sub></figcaption>
</figure>
<figure>
<img src="/images/controls-phi-step-comp.png">
<figcaption>Negative unity φ response to a step input of v<sub>t</sub></figcaption>
</figure>
<figure>
<img src="/images/controls-phi-ramp-comp.png">
<figcaption>Negative unity φ response to a ramp input of v<sub>t</sub></figcaption>
</figure>
<p>As we can see, implementing a unity feedback did effect the output. However I feel that this is not an appropriate feedback
system since we are doing a difference of two different units to get an error signal, speed and angle.</p>
<p>The final part of this task required us to suggest a location for a controller in the negative unity feedback system. My
suggestion was to put it between the error signal and the transfer function as this is the place I felt lent itself to be
best tuned. Although I believe it would have been equally, if not actually better in retrospect to place it on the feedback
line to the error calculation to convert the angle into a speed unit to generate a &ldquo;proper&rdquo; error signal from the difference
of two speed values instead of an angle and speed. However this was outside the scope of our class (we were only learning
about negative unity feedback).</p>
<figure>
<img src="/images/controls-phi-compensator.png">
<figcaption>My suggested location of a controller in the block diagram</figcaption>
</figure>
<h2 id="design">Design</h2>
<p>The final stage of this project was to top all our effort off with a properly designed controller for the system. First I
needed to determine the stability of the system using the Routh-Hurwitz criterion, and then go forth to design the
controller using a root-locus plot. <strong>My final proposal needed to maintain a percent over shoot (POS) less than 1%, and a
settling time (T<sub>s</sub>) less than 0.45 seconds.</strong></p>
<h3 id="stability-check">Stability Check</h3>
<p>To determine the stability of my system, I used the using the
<a href="https://en.wikipedia.org/wiki/Routh%E2%80%93Hurwitz_stability_criterion">Routh-Hurwitz criterion</a>.
Using my parameters for the system (the masses, resistance, etc.) the following transfer function describes the system:</p>
<blockquote>
<p>T(s) = (0.2s + 1.6) / (0.3s<sup>2</sup> + 2.6s + 3.562)</p>
</blockquote>
<p>This transfer function generates the following Routh table. Going down the first column of the table there are no sign
changes as all terms are positive. This means there are no poles in the right half of the imaginary plane, leaving both
poles in the left half, thus the system is stable. <em>I will not got into the theory on this, please check the link for a
proper explanation if you are interested.</em></p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>s</strong></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">s<sup>2</sup></td>
<td style="text-align:center">0.3</td>
<td style="text-align:center">3.562</td>
</tr>
<tr>
<td style="text-align:center">s<sup>1</sup></td>
<td style="text-align:center">2.6</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">s<sup>0</sup></td>
<td style="text-align:center">3.562</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<h3 id="actually-designing-a-controller">Actually Designing a Controller</h3>
<p>To use the tools in MATLAB and Simulink to help me tune my system I had to start by inputting my system&rsquo;s transfer function
into MATLAB and then call <strong>Sisotool</strong> to allow us to view and edit Root locus diagrams. This was done with the code below.</p>
<pre><code>s = tf('s'); % Used to define function

% Define transfer function and output to terminal
g = (0.2*s+1.6)/(0.3*s*s+2.4*s+1.962)

sisotool(g) % Open sisotool for this system
</code></pre><p>This would generate the familiar step response of the system&hellip;</p>
<figure>
<img src="/images/controls-initial-step-response.png">
<figcaption>Transient response of system with gain (K) of 20</figcaption>
</figure>
<p>&hellip; as well as the Root-Locus diagram. The <a href="https://en.wikipedia.org/wiki/Root_locus">root locus</a> helps us see where the
current system&rsquo;s roots are, and then lines/curves of where they could be as we vary the error gain, <strong>K</strong>. In the figure
below the current roots are marked as pink dots on the blue lines of possibility.</p>
<figure>
<img src="/images/controls-initial-root-locus.png">
<figcaption>Root-locus of negative unity feedback system</figcaption>
</figure>
<p>With sisotool started, I added the design requirements to the root locus graph. This added shaded regions that the
<strong>dominant roots needed to be out of</strong> to satisfy.</p>
<figure>
<img src="/images/controls-proposed-root-locus.png">
<figcaption>Root-locus of system with gain (K) of 20 and regions where we <b>do not</b> want our roots overlaid</figcaption>
</figure>
<p>I arbitrarily selected 20 as the gain to see if it would meet these criteria. Lucky for me it did, and below we can see the
unit step response for the system when <strong>K</strong> is 20. <em>Although I had a working answer I did play around with K to see how the
roots would more and the transient response change.</em></p>
<figure>
<img src="/images/controls-proposed-step-response.png">
<figcaption>Transient response of system with gain (K) of 20</figcaption>
</figure>
<p>This led to my proposed system being the following:</p>
<figure>
<img src="/images/controls-proposed-system.png">
<figcaption>My final proposed design</figcaption>
</figure>
<h1 id="reports">Reports</h1>
<p>This page is basically a retelling of my work presented in the two reports. Although I believe a better job of making my
work easier to read with this web page, I know that I stripped much of the working that went into this as well as the nicely
formatted math in the reports. You can find the reports at the following links:</p>
<ul>
<li><a href="/pdf/mie404-interim-report.pdf">Report 1</a> - Fundamentals and Modelling</li>
<li><a href="/pdf/mie404-final-report.pdf">Report 2</a> - Transient Time Response and Design</li>
</ul>
<p><em>Please note that these reports were written in response to a set of questions and not in a typical &ldquo;report&rdquo; format.</em></p>

  </section>
  </main>
  
  <footer>
     <a href="http://savobajic.ca/">Savo Bajic's Website</a>
</footer>
</div>

</body>
</html>
